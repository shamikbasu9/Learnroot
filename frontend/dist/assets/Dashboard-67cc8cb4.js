import{_ as T,a as j,B as M,C as v,U as B,G,b as U}from"./DashboardLayout-068cd469.js";import{a as N,r as u,j as P,o as r,k as f,l as L,b as t,t as d,e as l,c as n,d as i,F as _,m as w,n as E,p as I}from"./index-057104a9.js";import{c as C,B as k}from"./book-open-214ef39a.js";import{P as F}from"./plus-3b2803ef.js";import{U as H}from"./user-plus-76a32c04.js";const O=C("CalendarPlusIcon",[["path",{d:"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"3spt84"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["line",{x1:"19",x2:"19",y1:"16",y2:"22",key:"1ttwzi"}],["line",{x1:"16",x2:"22",y1:"19",y2:"19",key:"1g9955"}]]),p=C("UserCheckIcon",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),V={class:"p-6 space-y-8"},z={class:"mb-8"},q={class:"text-lg text-gray-600 dark:text-gray-400"},J={key:0,class:"text-center py-12"},Q={key:1,class:"text-center py-12"},R={class:"text-red-600 dark:text-red-400"},W={key:2,class:"space-y-8"},K={class:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm"},X={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},Y={class:"bg-gray-50 dark:bg-gray-700 p-6 rounded-lg border border-gray-200 dark:border-gray-600"},Z={class:"flex items-center"},tt={class:"p-3 bg-blue-100 rounded-lg dark:bg-blue-900"},et={class:"ml-4"},st={class:"text-2xl font-semibold text-gray-900 dark:text-white"},at={class:"bg-gray-50 dark:bg-gray-700 p-6 rounded-lg border border-gray-200 dark:border-gray-600"},rt={class:"flex items-center"},dt={class:"p-3 bg-green-100 rounded-lg dark:bg-green-900"},ot={class:"ml-4"},lt={class:"text-2xl font-semibold text-gray-900 dark:text-white"},nt={class:"bg-gray-50 dark:bg-gray-700 p-6 rounded-lg border border-gray-200 dark:border-gray-600"},it={class:"flex items-center"},ct={class:"p-3 bg-purple-100 rounded-lg dark:bg-purple-900"},gt={class:"ml-4"},ut={class:"text-2xl font-semibold text-gray-900 dark:text-white"},xt={class:"bg-gray-50 dark:bg-gray-700 p-6 rounded-lg border border-gray-200 dark:border-gray-600"},bt={class:"flex items-center"},yt={class:"p-3 bg-orange-100 rounded-lg dark:bg-orange-900"},ht={class:"ml-4"},mt={class:"text-2xl font-semibold text-gray-900 dark:text-white"},kt={class:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm"},pt={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},vt={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},ft={class:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm"},_t={class:"space-y-4"},wt={class:"w-20 text-sm text-gray-600 dark:text-gray-400"},Ct={class:"flex-1 mx-4"},Dt={class:"bg-gray-200 rounded-full h-6 dark:bg-gray-700"},St={class:"text-xs text-white font-medium"},At={class:"text-sm text-gray-600 dark:text-gray-400 w-12 text-right"},$t={class:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm"},Tt={key:0,class:"text-center py-8"},jt={key:1,class:"space-y-4"},Mt={class:"p-2 bg-gray-100 rounded-lg dark:bg-gray-600"},Bt={class:"ml-3 flex-1"},Gt={class:"text-sm text-gray-900 dark:text-white"},Ut={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},Ht={__name:"Dashboard",setup(Nt){const D=N(),g=u({statistics:{totalStudents:0,totalTeachers:0,totalClasses:0,totalSubjects:0},recentAnnouncements:[],upcomingEvents:[],classDistribution:[],teacherStatus:{active:0,inactive:0,unknown:0},recentActivity:[]}),y=u(!0),h=u(null),m=u([]),x=u([]),S=a=>{if(!a)return"Unknown time";const e=new Date(a),o=Math.floor((new Date-e)/1e3);return o<60?"Just now":o<3600?`${Math.floor(o/60)} minutes ago`:o<86400?`${Math.floor(o/3600)} hours ago`:o<604800?`${Math.floor(o/86400)} days ago`:e.toLocaleDateString()},A=async()=>{try{y.value=!0;const a=await j.get("/dashboard");if(g.value=a.data.data,a.data.data.allGrades&&a.data.data.allGrades.length>0){const e=a.data.data.allGrades,s=a.data.data.classDistribution||[],o=s.reduce((b,c)=>b+c.class_count,0);m.value=e.map(b=>{const c=s.find($=>$.grade_name===b.name);return{name:b.name,count:c?c.class_count:0,percentage:o>0&&c?Math.round(c.class_count/o*100):0}})}else m.value=[];a.data.data.recentActivity&&a.data.data.recentActivity.length>0?x.value=a.data.data.recentActivity.map(e=>{const s={student:p,teacher:p,class:k,subject:k,announcement:M,event:v};return{id:e.id||e.type+e.name,description:`${e.type==="student"?"New student registration":"New teacher registration"}: ${e.name}`,time:S(e.created_at),icon:s[e.type]||p}}):x.value=[]}catch(a){console.error("Error fetching dashboard data:",a),h.value="Failed to load dashboard data"}finally{y.value=!1}};return P(()=>{A()}),(a,e)=>(r(),f(T,null,{default:L(()=>[t("div",V,[t("div",z,[e[4]||(e[4]=t("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white mb-4"}," Dashboard Overview ",-1)),t("p",q," Welcome back, "+d(l(D).userName)+"! Here's what's happening at your school. ",1)]),y.value?(r(),n("div",J,[...e[5]||(e[5]=[t("p",{class:"text-gray-600 dark:text-gray-400"},"Loading dashboard data...",-1)])])):h.value?(r(),n("div",Q,[t("p",R,d(h.value),1)])):(r(),n("div",W,[t("div",K,[e[10]||(e[10]=t("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-6"},"Statistics Overview",-1)),t("div",X,[t("div",Y,[t("div",Z,[t("div",tt,[i(l(B),{class:"h-6 w-6 text-blue-600 dark:text-blue-400"})]),t("div",et,[e[6]||(e[6]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Total Students",-1)),t("p",st,d(g.value.statistics.totalStudents),1)])])]),t("div",at,[t("div",rt,[t("div",dt,[i(l(G),{class:"h-6 w-6 text-green-600 dark:text-green-400"})]),t("div",ot,[e[7]||(e[7]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Total Teachers",-1)),t("p",lt,d(g.value.statistics.totalTeachers),1)])])]),t("div",nt,[t("div",it,[t("div",ct,[i(l(k),{class:"h-6 w-6 text-purple-600 dark:text-purple-400"})]),t("div",gt,[e[8]||(e[8]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Total Classes",-1)),t("p",ut,d(g.value.statistics.totalClasses),1)])])]),t("div",xt,[t("div",bt,[t("div",yt,[i(l(v),{class:"h-6 w-6 text-orange-600 dark:text-orange-400"})]),t("div",ht,[e[9]||(e[9]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Total Subjects",-1)),t("p",mt,d(g.value.statistics.totalSubjects),1)])])])])]),t("div",kt,[e[15]||(e[15]=t("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-6"},"Quick Actions",-1)),t("div",pt,[t("button",{onClick:e[0]||(e[0]=s=>a.$router.push("/classes?action=add")),class:"flex flex-col items-center p-6 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 dark:border-gray-600 dark:hover:border-blue-400 dark:hover:bg-blue-900 transition-colors"},[i(l(F),{class:"h-8 w-8 text-gray-400 mb-2"}),e[11]||(e[11]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Add Class",-1))]),t("button",{onClick:e[1]||(e[1]=s=>a.$router.push("/teachers?action=add")),class:"flex flex-col items-center p-6 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 dark:border-gray-600 dark:hover:border-blue-400 dark:hover:bg-blue-900 transition-colors"},[i(l(H),{class:"h-8 w-8 text-gray-400 mb-2"}),e[12]||(e[12]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Add Teacher",-1))]),t("button",{onClick:e[2]||(e[2]=s=>a.$router.push("/timetable?action=create")),class:"flex flex-col items-center p-6 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 dark:border-gray-600 dark:hover:border-blue-400 dark:hover:bg-blue-900 transition-colors"},[i(l(U),{class:"h-8 w-8 text-gray-400 mb-2"}),e[13]||(e[13]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Create Timetable",-1))]),t("button",{onClick:e[3]||(e[3]=s=>a.$router.push("/calendar?action=add")),class:"flex flex-col items-center p-6 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 dark:border-gray-600 dark:hover:border-blue-400 dark:hover:bg-blue-900 transition-colors"},[i(l(O),{class:"h-8 w-8 text-gray-400 mb-2"}),e[14]||(e[14]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Add Event",-1))])])]),t("div",vt,[t("div",ft,[e[16]||(e[16]=t("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-6"},"Student Strength by Grade",-1)),t("div",_t,[(r(!0),n(_,null,w(m.value,s=>(r(),n("div",{key:s.name,class:"flex items-center"},[t("div",wt,d(s.name),1),t("div",Ct,[t("div",Dt,[t("div",{class:"bg-blue-600 h-6 rounded-full flex items-center justify-end pr-2",style:E({width:s.percentage+"%"})},[t("span",St,d(s.count),1)],4)])]),t("div",At,d(s.percentage)+"% ",1)]))),128))])]),e[17]||(e[17]=t("div",{class:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm"},[t("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-6"},"Today's Attendance"),t("div",{class:"space-y-4"},[t("div",{class:"flex items-center justify-between"},[t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Present"),t("div",{class:"flex items-center"},[t("div",{class:"w-32 bg-gray-200 rounded-full h-4 mr-3 dark:bg-gray-700"},[t("div",{class:"bg-green-500 h-4 rounded-full",style:{width:"0%"}})]),t("span",{class:"text-sm font-medium text-gray-900 dark:text-white"},"0%")])]),t("div",{class:"flex items-center justify-between"},[t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Absent"),t("div",{class:"flex items-center"},[t("div",{class:"w-32 bg-gray-200 rounded-full h-4 mr-3 dark:bg-gray-700"},[t("div",{class:"bg-red-500 h-4 rounded-full",style:{width:"0%"}})]),t("span",{class:"text-sm font-medium text-gray-900 dark:text-white"},"0%")])]),t("div",{class:"flex items-center justify-between"},[t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Leave"),t("div",{class:"flex items-center"},[t("div",{class:"w-32 bg-gray-200 rounded-full h-4 mr-3 dark:bg-gray-700"},[t("div",{class:"bg-yellow-500 h-4 rounded-full",style:{width:"0%"}})]),t("span",{class:"text-sm font-medium text-gray-900 dark:text-white"},"0%")])])])],-1))]),t("div",$t,[e[19]||(e[19]=t("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-6"},"Recent Activity",-1)),x.value.length===0?(r(),n("div",Tt,[...e[18]||(e[18]=[t("p",{class:"text-gray-500 dark:text-gray-400"},"No recent activity",-1)])])):(r(),n("div",jt,[(r(!0),n(_,null,w(x.value,s=>(r(),n("div",{key:s.id,class:"flex items-start p-4 bg-gray-50 dark:bg-gray-700 rounded-lg"},[t("div",Mt,[(r(),f(I(s.icon),{class:"h-4 w-4 text-gray-600 dark:text-gray-400"}))]),t("div",Bt,[t("p",Gt,d(s.description),1),t("p",Ut,d(s.time),1)])]))),128))]))])]))])]),_:1}))}};export{Ht as default};
