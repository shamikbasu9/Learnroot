import{y as B,a as f,u as D,r as g,j as V,z as q,o as c,c as k,h as _,b as e,d as l,e as o,F as E,m as U,t as m,x as M,k as v,A as N,B as T,l as $,p as H,s as R}from"./index-057104a9.js";import{c as t,B as I}from"./book-open-214ef39a.js";const F=t("AwardIcon",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),G=t("BellIcon",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),O=t("CalendarIcon",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),P=t("ClockIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),X=t("FileTextIcon",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),W=t("GraduationCapIcon",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]),Z=t("LayoutDashboardIcon",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),J=t("LogOutIcon",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),K=t("MegaphoneIcon",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]),Q=t("MenuIcon",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Y=t("MoonIcon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),ee=t("SearchIcon",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),te=t("SettingsIcon",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ae=t("SunIcon",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),se=t("UserIcon",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),C=t("UsersIcon",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),oe=t("XIcon",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),b=B.create({baseURL:{}.VITE_API_URL||"http://localhost:5002/api",timeout:1e4,headers:{"Content-Type":"application/json"}});b.interceptors.request.use(s=>{const i=f();return i.token&&(s.headers.Authorization=`Bearer ${i.token}`),s},s=>Promise.reject(s));b.interceptors.response.use(s=>s,s=>{var d,r,y;((d=s.response)==null?void 0:d.status)===401&&(f().logout(),window.location.href="/login");const i=((y=(r=s.response)==null?void 0:r.data)==null?void 0:y.message)||s.message||"An error occurred";return console.error("API Error:",i),Promise.reject(s)});const re={class:"min-h-screen bg-gray-50 dark:bg-gray-900 lg:flex"},ne={class:"flex flex-col h-full"},le={class:"flex items-center justify-between h-16 px-6 border-b border-gray-200 dark:border-gray-700"},ce={class:"flex items-center"},ie={class:"h-8 w-8 bg-blue-600 rounded-lg flex items-center justify-center"},de={class:"flex-1 px-4 py-6 space-y-2 overflow-y-auto"},ye={class:"border-t border-gray-200 dark:border-gray-700 p-4"},he={class:"flex items-center"},ue={class:"h-8 w-8 bg-gray-300 rounded-full flex items-center justify-center"},ge={class:"ml-3 flex-1"},ke={class:"text-sm font-medium text-gray-900 dark:text-white"},xe={class:"text-xs text-gray-500 dark:text-gray-400 capitalize"},pe={class:"flex-1 flex flex-col lg:pl-0"},me={class:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"},ve={class:"flex items-center justify-between h-16 px-4 sm:px-6 lg:px-8"},fe={class:"flex items-center space-x-4"},be={class:"hidden md:block"},we={class:"relative"},_e={class:"relative p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg"},Me={key:0,class:"absolute top-1 right-1 h-2 w-2 bg-red-500 rounded-full"},Ie={class:"p-4 sm:p-6 lg:p-8"},ze={__name:"DashboardLayout",setup(s){const i=D(),d=f(),r=g(!1),y=g(!1),h=g(!1),w=g([]),x=g(!1),S=[{name:"Dashboard",href:"/dashboard",icon:Z},{name:"Classes",href:"/classes",icon:C},{name:"Subjects",href:"/subjects",icon:I},{name:"Grades",href:"/grades",icon:F},{name:"Teachers",href:"/teachers",icon:W},{name:"Students",href:"/students",icon:C},{name:"Timetable",href:"/timetable",icon:P},{name:"Calendar",href:"/calendar",icon:O},{name:"Announcements",href:"/announcements",icon:K},{name:"Reports",href:"/reports",icon:X},{name:"Settings",href:"/settings",icon:te}],z=async()=>{var u;try{const a=await b.get("/dashboard");w.value=((u=a.data.data)==null?void 0:u.recentAnnouncements)||[],x.value=w.value.length>0}catch(a){console.error("Error fetching notifications:",a),x.value=!1}},j=async()=>{await d.logout(),i.push("/login")},L=()=>{h.value=!h.value,document.documentElement.classList.toggle("dark"),localStorage.setItem("darkMode",h.value)},p=()=>{y.value=window.innerWidth<1024,y.value||(r.value=!1)};return V(()=>{p(),window.addEventListener("resize",p),localStorage.getItem("darkMode")==="true"&&(h.value=!0,document.documentElement.classList.add("dark")),z()}),q(()=>{window.removeEventListener("resize",p)}),(u,a)=>{const A=T("router-link");return c(),k("div",re,[r.value&&y.value?(c(),k("div",{key:0,class:"fixed inset-0 z-40 bg-black bg-opacity-50 lg:hidden",onClick:a[0]||(a[0]=n=>r.value=!1)})):_("",!0),e("aside",{class:M(["fixed inset-y-0 left-0 z-50 w-64 bg-white dark:bg-gray-800 transform transition-transform duration-300 ease-in-out lg:relative lg:translate-x-0",r.value?"translate-x-0":"-translate-x-full"])},[e("div",ne,[e("div",le,[e("div",ce,[e("div",ie,[l(o(I),{class:"h-5 w-5 text-white"})]),a[3]||(a[3]=e("span",{class:"ml-2 text-xl font-semibold text-gray-900 dark:text-white"}," Learnroot ",-1))]),e("button",{onClick:a[1]||(a[1]=n=>r.value=!1),class:"lg:hidden"},[l(o(oe),{class:"h-5 w-5 text-gray-500"})])]),e("nav",de,[(c(),k(E,null,U(S,n=>l(A,{key:n.name,to:n.href,class:M(["flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors",u.$route.path===n.href?"bg-blue-50 text-blue-700 dark:bg-blue-900 dark:text-blue-200":"text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700"])},{default:$(()=>[(c(),v(H(n.icon),{class:"h-5 w-5 mr-3"})),R(" "+m(n.name),1)]),_:2},1032,["to","class"])),64))]),e("div",ye,[e("div",he,[e("div",ue,[l(o(se),{class:"h-5 w-5 text-gray-600"})]),e("div",ge,[e("p",ke,m(o(d).userName),1),e("p",xe,m(o(d).userRole),1)]),e("button",{onClick:j,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[l(o(J),{class:"h-5 w-5"})])])])])],2),e("div",pe,[e("header",me,[e("div",ve,[e("button",{onClick:a[2]||(a[2]=n=>r.value=!r.value),class:"lg:hidden"},[l(o(Q),{class:"h-6 w-6 text-gray-600 dark:text-gray-400"})]),e("div",fe,[e("div",be,[e("div",we,[l(o(ee),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a[4]||(a[4]=e("input",{type:"text",placeholder:"Search...",class:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},null,-1))])]),e("button",_e,[l(o(G),{class:"h-5 w-5"}),x.value?(c(),k("span",Me)):_("",!0)]),e("button",{onClick:L,class:"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg"},[h.value?(c(),v(o(Y),{key:1,class:"h-5 w-5"})):(c(),v(o(ae),{key:0,class:"h-5 w-5"}))])])])]),e("main",Ie,[N(u.$slots,"default")])])])}}};export{G as B,O as C,W as G,te as S,C as U,ze as _,b as a,P as b};
